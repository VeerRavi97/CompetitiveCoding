
#include<bits/stdc++.h>
using namespace  std;
int main()
{

    int tc;
    int cost[256];
    int count[256];
    cin >> tc;


    while(tc--)
    {
    memset(cost,0,sizeof (cost));
     memset(count,0,sizeof (count));
     double sum =0;
    int n1;
    cin >> n1;
       for(int i=0;i<n1;i++)
       {
         char a;
         int b;
         cin >> a >> b;
         cost[a]=b;
       }

       int n2;

       cin >> n2;
       cin.ignore();
       while(n2--)
       {
            string s;
           getline(cin,s);
           int len=s.length();
           for(int k=0;k<len;k++)
           {
               char d=s[k];
               count[d]++;
           }
       }


        for(int i=0;i<256;i++)
        {
            int n=count[i];
            int k=cost[i];
        sum+=n*k;
        }

      printf("%.2lf$\n",sum/100);
    }
}

